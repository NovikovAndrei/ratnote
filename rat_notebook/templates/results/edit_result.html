{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-4">
  <h2 class="mb-4">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</h2>

  <form method="post" class="card p-4">
    {% csrf_token %}

    {# --- –°–ø–æ—Ä—Ç—Å–º–µ–Ω: –∫—Ä–∞—Å–∏–≤–æ –≤—ã–≤–æ–¥–∏–º, –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—ë–º —Å–∫—Ä—ã—Ç—ã–º –ø–æ–ª–µ–º --- #}
    <div class="mb-3">
      <label class="form-label">–°–ø–æ—Ä—Ç—Å–º–µ–Ω</label>
      <div class="form-control-plaintext fw-semibold">
        {{ form.instance.athlete.name }}
        <span class="text-muted">({{ form.instance.athlete.growth_category }})</span>
        {% if form.instance.athlete.is_champion %}<span class="ms-1">üèÜ</span>{% endif %}
      </div>
      <input type="hidden" name="{{ form.athlete.name }}" value="{{ form.instance.athlete.id }}">
    </div>

    {# --- –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞: –∫—Ä–∞—Å–∏–≤–æ –≤—ã–≤–æ–¥–∏–º, –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—ë–º —Å–∫—Ä—ã—Ç—ã–º –ø–æ–ª–µ–º --- #}
    <div class="mb-3">
      <label class="form-label">–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞</label>
      <div class="form-control-plaintext">
        {{ form.instance.discipline.verbose }}
      </div>
      <input type="hidden" name="{{ form.discipline.name }}" value="{{ form.instance.discipline.id }}">
    </div>

    {# --- –†–µ–∑—É–ª—å—Ç–∞—Ç: –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–µ –ø–æ–ª–µ --- #}
    <div class="mb-3">
      <label class="form-label">{{ form.result.label }}</label>

      {% if form.instance.discipline.code == 'treadmill' %}
        <input
          type="number"
          name="{{ form.result.name }}"
          value="{{ form.instance.result|floatformat:2 }}"
          step="0.01"
          class="form-control"
        >
      {% else %}
        <input
          type="number"
          name="{{ form.result.name }}"
          value="{{ form.instance.result|floatformat:0 }}"
          step="1"
          class="form-control"
        >
      {% endif %}

      {% for err in form.result.errors %}
        <div class="text-danger small mt-1">{{ err }}</div>
      {% endfor %}
    </div>

    <div class="d-flex gap-2">
      <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <a href="{% url 'event_detail' event.id %}" class="btn btn-outline-secondary">–û—Ç–º–µ–Ω–∏—Ç—å</a>
    </div>
  </form>
</div>
{% endblock %}
